<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夢がかなう場所 - 東京ディズニーリゾート</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="base.css">
    <link rel="icon" href="images/icon_tdr.svg">
    <style>
        .anime-card img {
            width: 100%;
            height: 30vw;
            max-height: 300px;
            object-fit: cover;
        }

        .ranking-card {
            transition: transform 0.2s ease;
        }

        .ranking-card img {
            width: auto;
            height: 150px;
            object-fit: cover;
            display: block;
            margin: 0 auto;
        }

        .ranking-card:hover {
            transform: scale(1.02);
        }

        .ranking-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            opacity: 0.2;
        }

        @media (max-width: 767.98px) {
            .anime-card img {
                object-position: 50% 40%;
            }
        }

        .post-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-left: 4px solid var(--primary-color);
        }

        .post-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-avatar-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }

        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1050;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.25);
        }

        #previewTags span {
            display: inline-block;
            margin-right: 0.25rem;
            margin-bottom: 0.25rem;
        }
    </style>
</head>

<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="bi bi-stars"></i> 東京ディズニーリゾート
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="anime-ranking.html">ランキング</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="anime-list.html">アトラクション</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="anime-mylist.html">ショー・パレード</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="anime-community.html">コミュニティ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link d-lg-none" href="anime-login.html">ログイン</a>
                    </li>
                </ul>
                <a href="anime-login.html" class="btn btn-light ms-3 d-none d-lg-block">
                    <i class="bi bi-person-circle"></i> ログイン</a>
            </div>
        </div>
    </nav>

    <div class="toast-container">
        <div class="toast align-items-center text-white bg-success border-0" role="alert" id="successToast">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    口コミの投稿が完了しました！
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>

    <div class="page-heading">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">
                <i class="bi bi-stars"></i> パークコミュニティ
            </h1>
            <p class="lead">ディズニー好きと繋がろう！アトラクションの感想や攻略法をシェアしよう</p>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-header text-bg-dark">
                        <h5 class="mb-0"><i class="bi bi-pencil-square"></i> 口コミを投稿する</h5>
                    </div>
                    <div class="card-body">
                        <div id="formAlert" class="alert alert-danger d-none" role="alert"></div>
                        <form id="postForm">
                            <div class="mb-3">
                                <label for="attractionSelect" class="form-label fw-bold">アトラクションを選択 <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="attractionSelect" required>
                                    <option value="" disabled selected hidden>アトラクションを選択してください</option>
                                    <option value="1">美女と野獣“魔法のものがたり”</option>
                                    <option value="2">ソアリン：ファンタスティック・フライト</option>
                                    <option value="3">スプラッシュ・マウンテン</option>
                                    <option value="4">タワー・オブ・テラー</option>
                                    <option value="5">トイ・ストーリー・マニア！</option>
                                </select>
                                <small class="text-danger d-none" id="attractionError">アトラクションを選択してください</small>
                            </div>

                            <div class="mb-3">
                                <label for="postTitle" class="form-label fw-bold">タイトル <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="postTitle" placeholder="例: 朝イチのソアリン、最高でした！"
                                    required>
                                <small class="text-danger d-none" id="titleError">タイトルは30文字以内で入力してください</small>
                            </div>

                            <div class="mb-3">
                                <label for="categorySelect" class="form-label fw-bold">カテゴリ <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="categorySelect" required>
                                    <option value="" disabled selected hidden>カテゴリを選択</option>
                                    <option value="review">体験感想</option>
                                    <option value="wait_time">混雑・待ち時間</option>
                                    <option value="strategy">攻略・コツ</option>
                                    <option value="question">質問</option>
                                    <option value="photo">フォトスポット</option>
                                </select>
                                <small class="text-danger d-none" id="categoryError">カテゴリを選択してください</small>
                            </div>

                            <div class="mb-3">
                                <label for="postContent" class="form-label fw-bold">本文 <span
                                        class="text-danger">*</span></label>
                                <textarea class="form-control" id="postContent" rows="6"
                                    placeholder="アトラクションの感想や、おすすめの乗り方を教えてください..." required></textarea>
                                <small class="text-danger d-none" id="contentError">本文は500文字以内で入力してください</small>
                            </div>

                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="spoilerCheck">
                                    <label class="form-check-label" for="spoilerCheck">
                                        <span class="badge bg-danger">ネタバレ注意</span> 演出やストーリーの詳細が含まれます
                                    </label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="tagInput" class="form-label fw-bold">タグ（任意）</label>
                                <input type="text" class="form-control" id="tagInput"
                                    placeholder="例: DPA利用, 子供連れ, 隠れミッキー">
                                <div class="form-text">カンマ区切りで複数のタグを入力できます</div>
                            </div>

                            <div class="alert alert-info" role="alert">
                                <i class="bi bi-info-circle-fill"></i>
                                投稿する前に、<a href="#guidelines" class="alert-link">パークコミュニティ・ガイドライン</a>をご確認ください。
                            </div>

                            <div class="d-flex gap-2">
                                <button type="submit" id="submitBtn" class="btn btn-primary" disabled>
                                    <i class="bi bi-send-fill"></i>
                                    <span class="d-inline d-sm-none">投稿</span>
                                    <span class="d-none d-sm-inline">投稿する</span>
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal"
                                    data-bs-target="#previewModal" id="previewBtn">
                                    <i class="bi bi-eye"></i> プレビュー
                                </button>
                                <button type="reset" class="btn btn-outline-danger">
                                    <i class="bi bi-x-circle"></i> クリア
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <select class="form-select form-select-sm">
                                    <option>すべてのアトラクション</option>
                                    <option>東京ディズニーランド</option>
                                    <option>東京ディズニーシー</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select form-select-sm">
                                    <option>すべてのカテゴリ</option>
                                    <option>体験感想</option>
                                    <option>混雑・待ち時間</option>
                                    <option>攻略・コツ</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select form-select-sm">
                                    <option>新着順</option>
                                    <option>参考になった順</option>
                                    <option>コメント数順</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 class="mb-3 fw-bold"><i class="bi bi-chat-left-text-fill"></i> 最新の口コミ</h4>

                <div class="card post-card mb-3">
                    <div class="card-body">
                        <div class="d-flex mb-3">
                            <img src="https://placehold.co/50x50/6366f1/ffffff?text=U1" class="user-avatar me-3"
                                alt="ユーザー">
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="mb-1 fw-bold">ミッキー推しさん</h6>
                                        <small class="text-muted">
                                            <i class="bi bi-clock"></i> 5分前
                                            <span class="badge bg-primary ms-2">体験感想</span>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h5 class="card-title fw-bold mb-2">
                            <a href="#" class="text-decoration-none text-dark">美女と野獣、世界観がすごすぎた！</a>
                        </h5>
                        <p class="text-muted small mb-2">
                            <i class="bi bi-geo-alt-fill"></i> 美女と野獣“魔法のものがたり”
                        </p>
                        <p class="card-text">
                            初めてDPAを使って乗りました！お城の中の待機列からクオリティが高くて、野獣が王子に戻るシーンは本当に魔法を見ているようでした。
                        </p>
                        <div class="d-flex gap-2 mb-3">
                            <span class="badge bg-info">#感動</span>
                            <span class="badge bg-info">#DPA推奨</span>
                            <span class="badge bg-info">#ランド</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex gap-3">
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-hand-thumbs-up"></i>
                                    <span class="d-none d-sm-inline"> 参考になった (45)</span>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="bi bi-chat"></i>
                                    <span class="d-none d-sm-inline"> コメント (12)</span>
                                </button>
                                <button class="btn btn-sm btn-outline-info">
                                    <i class="bi bi-share"></i>
                                    <span class="d-none d-sm-inline"> シェア</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card post-card mb-3">
                    <div class="card-body">
                        <div class="d-flex mb-3">
                            <img src="https://placehold.co/50x50/ec4899/ffffff?text=U2" class="user-avatar me-3"
                                alt="ユーザー">
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="mb-1 fw-bold">パーク通</h6>
                                        <small class="text-muted">
                                            <i class="bi bi-clock"></i> 1時間前
                                            <span class="badge bg-warning text-dark ms-2">攻略・コツ</span>
                                            <span class="badge bg-danger ms-1">ネタバレ注意</span>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h5 class="card-title fw-bold mb-2">
                            <a href="#" class="text-decoration-none text-dark">ソアリンの待ち時間を短縮する方法</a>
                        </h5>
                        <p class="text-muted small mb-2">
                            <i class="bi bi-geo-alt-fill"></i> ソアリン：ファンタスティック・フライト
                        </p>
                        <p class="card-text">
                            午後のショーが開催されている時間帯は、スタンバイの列が少し短くなる傾向にあります。あとは閉園間際も狙い目ですが、ラインカットに注意が必要です。
                        </p>
                        <div class="d-flex gap-2 mb-3">
                            <span class="badge bg-info">#時短テク</span>
                            <span class="badge bg-info">#混雑回避</span>
                            <span class="badge bg-info">#シー</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex gap-3">
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-hand-thumbs-up"></i>
                                    <span class="d-none d-sm-inline"> 参考になった (82)</span>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="bi bi-chat"></i>
                                    <span class="d-none d-sm-inline"> コメント (5)</span>
                                </button>
                                <button class="btn btn-sm btn-outline-info">
                                    <i class="bi bi-share"></i>
                                    <span class="d-none d-sm-inline"> シェア</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <nav aria-label="投稿ページネーション">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#"><i class="bi bi-chevron-left"></i></a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#"><i class="bi bi-chevron-right"></i></a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="bi bi-fire"></i> 注目の話題</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item px-0">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="mb-1">ソアリンの待ち時間が減少中</h6>
                                        <small class="text-muted">東京ディズニーシー</small>
                                    </div>
                                    <span class="badge bg-primary">234</span>
                                </div>
                            </li>
                            <li class="list-group-item px-0">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="mb-1">新エリアの隠れミッキーまとめ</h6>
                                        <small class="text-muted">ファンタジースプリングス</small>
                                    </div>
                                    <span class="badge bg-primary">189</span>
                                </div>
                            </li>
                            <li class="list-group-item px-0">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="mb-1">絶叫マシン攻略法</h6>
                                        <small class="text-muted">全アトラクション</small>
                                    </div>
                                    <span class="badge bg-primary">567</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="bi bi-bar-chart-fill"></i> コミュニティ統計</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-6 mb-3">
                                <h4 class="text-primary fw-bold">3,456</h4>
                                <small class="text-muted">総口コミ数</small>
                            </div>
                            <div class="col-6 mb-3">
                                <h4 class="text-success fw-bold">1,234</h4>
                                <small class="text-muted">アクティブユーザー</small>
                            </div>
                            <div class="col-6">
                                <h4 class="text-warning fw-bold">234</h4>
                                <small class="text-muted">本日の投稿</small>
                            </div>
                            <div class="col-6">
                                <h4 class="text-info fw-bold">89</h4>
                                <small class="text-muted">現在インパ中</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" id="guidelines">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="bi bi-shield-check"></i> ガイドライン</h5>
                    </div>
                    <div class="card-body">
                        <ul class="small mb-0">
                            <li class="mb-2">キャストさんや他のゲストを尊重しましょう</li>
                            <li class="mb-2">ネタバレには必ず警告をつけましょう</li>
                            <li class="mb-2">過度な場所取りなどのマナー違反投稿は禁止です</li>
                            <li class="mb-2">公式のルールとマナーを守りましょう</li>
                            <li>スパムや勧誘行為は禁止です</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5 class="fw-bold mb-3"><i class="bi bi-stars"></i> 夢がかなう場所</h5>
                    <p class="text-light">東京ディズニーリゾート</p>
                </div>
                <div class="col-md-2 mb-3">
                    <h6 class="fw-bold mb-3">サイト情報</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light text-decoration-none">About</a></li>
                        <li><a href="#" class="text-light text-decoration-none">利用規約</a></li>
                        <li><a href="#" class="text-light text-decoration-none">プライバシー</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-3">
                    <h6 class="fw-bold mb-3">サポート</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light text-decoration-none">ヘルプ</a></li>
                        <li><a href="#" class="text-light text-decoration-none">お問い合わせ</a></li>
                        <li><a href="#" class="text-light text-decoration-none">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">フォローする</h6>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-light"><i class="bi bi-twitter fs-4"></i></a>
                        <a href="#" class="text-light"><i class="bi bi-instagram fs-4"></i></a>
                        <a href="#" class="text-light"><i class="bi bi-youtube fs-4"></i></a>
                        <a href="#" class="text-light"><i class="bi bi-discord fs-4"></i></a>
                    </div>
                </div>
            </div>
            <hr class="border-light">
            <p class="text-center text-light mb-0">&copy; 2025 TokyoDisneyResort. All rights reserved.</p>
        </div>
    </footer>
    <button id="backToTopBtn" class="btn shadow d-flex align-items-center justify-content-center">
        <i class="bi bi-chevron-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('postForm');
            const submitBtn = document.getElementById('submitBtn');

            const animeSelect = document.getElementById('animeSelect');
            const postTitle = document.getElementById('postTitle');
            const categorySelect = document.getElementById('categorySelect');
            const postContent = document.getElementById('postContent');

            function validate() {
                let valid = true;

                // 作品選択
                if (!animeSelect.value) {
                    document.getElementById('animeError').classList.remove('d-none');
                    valid = false;
                } else {
                    document.getElementById('animeError').classList.add('d-none');
                }

                // タイトル（30文字以内）
                if (!postTitle.value.trim() || postTitle.value.length > 30) {
                    document.getElementById('titleError').classList.remove('d-none');
                    valid = false;
                } else {
                    document.getElementById('titleError').classList.add('d-none');
                }

                // カテゴリ
                if (!categorySelect.value) {
                    document.getElementById('categoryError').classList.remove('d-none');
                    valid = false;
                } else {
                    document.getElementById('categoryError').classList.add('d-none');
                }

                // 本文（500文字以内）
                if (!postContent.value.trim() || postContent.value.length > 500) {
                    document.getElementById('contentError').classList.remove('d-none');
                    valid = false;
                } else {
                    document.getElementById('contentError').classList.add('d-none');
                }

                // ボタン制御
                submitBtn.disabled = !valid;
            }

            // 入力イベント監視
            [animeSelect, postTitle, categorySelect, postContent].forEach(field => {
                field.addEventListener('input', validate);
                field.addEventListener('change', validate);
            });

            // 初期チェック
            validate();

            // フォーム送信時のトースト表示
            document.getElementById('postForm').addEventListener('submit', function (e) {
                e.preventDefault();
                var toast = new bootstrap.Toast(document.getElementById('successToast'));
                toast.show();
                this.reset();
            });

            // プレビュー生成
            previewBtn.addEventListener("click", function () {
                const animeSelect = document.getElementById("animeSelect");
                document.getElementById("previewAnime").textContent =
                    animeSelect.options[animeSelect.selectedIndex].text;

                document.getElementById("previewTitle").textContent =
                    document.getElementById("postTitle").value;

                const categorySelect = document.getElementById("categorySelect");
                const categoryValue = categorySelect.value;
                const categoryText = categorySelect.options[categorySelect.selectedIndex].text;

                document.getElementById("previewContent").textContent =
                    document.getElementById("postContent").value;

                const spoilerCheck = document.getElementById("spoilerCheck").checked;
                document.getElementById("previewSpoiler").classList.toggle("d-none", !spoilerCheck);

                const rawTags = document.getElementById("tagInput").value;
                const tagContainer = document.getElementById("previewTags");
                tagContainer.innerHTML = "";
                if (rawTags.trim() !== "") {
                    rawTags.split(",")
                        .map(tag => tag.trim())
                        .filter(tag => tag !== "")
                        .forEach(tag => {
                            const span = document.createElement("span");
                            span.className = "badge bg-info me-1";
                            span.textContent = "#" + tag;
                            tagContainer.appendChild(span);
                        });
                }
                // カテゴリバッジ
                const categoryColors = {
                    impression: "bg-primary",
                    theory: "bg-warning text-dark",
                    question: "bg-success",
                    discussion: "bg-secondary",
                    fanart: "bg-dark"
                };
                const categoryContainer = document.getElementById("previewCategory");
                categoryContainer.innerHTML = "";
                if (categoryValue) {
                    const span = document.createElement("span");
                    span.className = `badge ${categoryColors[categoryValue]}`;
                    span.textContent = categoryText;
                    categoryContainer.appendChild(span);
                }
            });
        });
    </script>
    <script type="text/javascript" src="common.js"></script>
</body>

</html>